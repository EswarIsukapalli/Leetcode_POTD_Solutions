ğŸ”¥ Count Number of Trapezoids â€” 100% Beats | Optimal & Clean Java Solution

Author: eswarisukapalli9818
Badge: ğŸ… 50 Days Badge 2025
Category: Array Â· Hash Table Â· Math Â· Ordered Map

âœ”ï¸ Problem: Count Number of Trapezoids â€“ 1
ğŸ§  Intuition

To form a trapezoid, we need two parallel horizontal sides.
A horizontal side is possible only when two points share the same y-coordinate.

For each unique y, the number of horizontal segments is:

C(n, 2) = n Ã— (n âˆ’ 1) / 2

Any horizontal segment on one y-level can pair with any segment on another y-level to form a trapezoid.

So:

Total Trapezoids = Î£ (pairs on level i Ã— sum of pairs from previous levels)

ğŸ“˜ Approach
1ï¸âƒ£ Group points by y-coordinate
Map<Integer, Integer> mpp = new HashMap<>();

2ï¸âƒ£ For each y-level, compute horizontal segments
horizontalLines = n * (n - 1) / 2

3ï¸âƒ£ Maintain cumulative segments
prevHorizontalLines += horizontalLines

4ï¸âƒ£ Count trapezoids
result += horizontalLines * prevHorizontalLines

5ï¸âƒ£ Return result modulo (1e9 + 7)
â±ï¸ Complexity

Time Complexity: O(n)

Space Complexity: O(k)
where k = unique y-levels

ğŸ§‘â€ğŸ’» Java Code (100% Beats)
class Solution {
    public int countTrapezoids(int[][] points) {
        long M = 1000000007;
        Map<Integer, Integer> mpp = new HashMap<>();
        
        for (int[] point : points) {
            int y = point[1];
            mpp.put(y, mpp.getOrDefault(y, 0) + 1);
        }

        long res = 0;
        long prevHoriLines = 0;

        for (int cnt : mpp.values()) {
            long horiLines = (long) cnt * (cnt - 1) / 2;
            res = (res + (prevHoriLines * horiLines)) % M;
            prevHoriLines += horiLines;
        }

        return (int) (res % M);
    }
}
